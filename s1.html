<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>安全位置回報</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    button { padding: 10px 20px; font-size: 18px; margin: 10px; }
    #result { margin: 20px; }
    #maplink { display: block; margin: 10px auto; }
  </style>
</head>
<body>
  <h1>安全位置回報</h1>
  <button onclick="getLocation()">回報我的位置</button>
  <div id="result"></div>
  <a id="maplink" href="#" target="_blank">查看地圖</a>

  <script>
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(success, error);
      } else {
        document.getElementById('result').innerHTML = "您的瀏覽器不支援定位功能";
      }
    }

    function success(position) {
      const lat = position.coords.latitude;
      const lng = position.coords.longitude;
      const url = `https://www.google.com/maps/search/?api=1&query=${lat},${lng}`;
      document.getElementById('result').innerHTML = `緯度: ${lat}, 經度: ${lng}<br>複製下方地圖連結發給家人`;
      document.getElementById('maplink').href = url;
      document.getElementById('maplink').innerHTML = "點此查看地圖";
    }

    function error() {
      document.getElementById('result').innerHTML = "無法取得位置，請確認定位權限已開啟";
    }
  </script>
</body>
</html>

